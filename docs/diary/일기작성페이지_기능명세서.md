# WhisperMind 일기 작성 페이지 기능 명세서

## 1. 개요

본 문서는 WhisperMind 앱의 일기 작성 페이지의 기능 요구사항을 정의합니다. 이 페이지는 사용자가 자신의 감정과 생각을 기록하고 표현할 수 있는 핵심 기능을 제공합니다.

## 2. 사용자 스토리

1. **감정 기록**
   - "사용자로서, 나는 오늘의 감정을 선택하고 그 강도를 표현하여 내 감정 상태를 기록하고 싶다."

2. **일기 작성**
   - "사용자로서, 나는 제목과 본문을 통해 내 생각과 경험을 자유롭게 작성하고 싶다."

3. **미디어 첨부**
   - "사용자로서, 나는 사진, 동영상, 음성 등의 미디어를 일기에 첨부하여 더 풍부한 표현을 하고 싶다."

4. **태그 관리**
   - "사용자로서, 나는 일기에 태그를 추가하여 내용을 분류하고 나중에 쉽게 찾을 수 있게 하고 싶다."

5. **AI 지원**
   - "사용자로서, 나는 AI의 도움을 받아 더 쉽게 감정을 표현하고 일기를 작성하고 싶다."

6. **위치 정보**
   - "사용자로서, 나는 일기 작성 시 현재 위치를 기록하여 추억의 장소를 기억하고 싶다."

7. **자동 저장**
   - "사용자로서, 나는 일기 작성 중 내용이 자동으로 저장되어 작업을 잃어버리지 않기를 원한다."

## 3. 핵심 기능 요구사항

### 3.1 감정 선택 및 표현

1. **감정 선택 인터페이스**
   - 다양한 감정 이모지를 그리드 형태로 제공
   - 긍정적, 부정적, 중립적 감정으로 분류
   - 자주 사용하는 감정을 상단에 표시
   - 사용자 지정 감정 추가 기능 제공

2. **감정 강도 조절**
   - 슬라이더를 통해 1-10 단계로 감정 강도 조절
   - 선택된 감정과 강도에 따라 UI 배경색 미묘하게 변화

### 3.2 일기 작성 인터페이스

1. **제목 입력 필드**
   - 최대 100자 제한
   - 비어있을 경우 자동으로 날짜를 제목으로 사용

2. **본문 작성 영역**
   - 서식 도구 제공 (굵게, 기울임, 밑줄, 글머리 기호)
   - 자동 줄바꿈 지원
   - 스크롤 가능한 영역으로 길이 제한 없음
   - 텍스트 선택 시 맥락 메뉴 제공 (복사, 붙여넣기, 서식 변경)

3. **날짜 관리**
   - 기본적으로 현재 날짜 표시
   - 과거 날짜로 변경 가능 (미래 날짜는 제한)
   - 날짜 선택 시 캘린더 UI 제공

### 3.3 미디어 관리

1. **사진/이미지 첨부**
   - 카메라로 직접 촬영 기능
   - 갤러리에서 선택 기능
   - 이미지 편집 기능 (자르기, 회전, 필터)
   - 한 일기에 최대 10개 이미지 첨부 가능

2. **동영상 첨부**
   - 카메라로 직접 촬영 기능
   - 갤러리에서 선택 기능
   - 동영상 트리밍 기능
   - 한 일기에 최대 2개 동영상 첨부 가능 (각 1분 이내)

3. **음성 메모**
   - 최대 5분 길이의 음성 녹음 기능
   - 재생, 일시정지, 삭제 컨트롤
   - 음성 메모에 제목 추가 기능
   - 한 일기에 최대 3개 음성 메모 첨부 가능

4. **그림 그리기**
   - 내장 캔버스에서 그림 그리기 기능
   - 다양한 브러시 스타일과 색상 선택
   - 지우개 및 실행 취소 기능
   - 한 일기에 최대 5개 그림 첨부 가능

### 3.4 태그 관리

1. **태그 추가 인터페이스**
   - 새 태그 직접 입력 기능
   - 추천 태그 제안 기능
   - 최근 사용 태그 표시
   - 한 일기에 최대 10개 태그 추가 가능

2. **태그 관리**
   - 태그 삭제 기능
   - 태그 편집 기능
   - 태그별 색상 지정 기능 (선택사항)

### 3.5 AI 지원 기능

1. **감정 분석**
   - 작성된 내용 기반 감정 상태 분석
   - 감정 변화 추적 및 시각화

2. **작성 도우미**
   - 문맥 기반 문장 완성 제안
   - 동의어 및 표현 추천
   - 맞춤법 및 문법 검사

3. **질문 프롬프트**
   - 일기 작성을 돕는 질문 제안
   - 감정 탐색을 위한 맞춤형 프롬프트

### 3.6 위치 정보

1. **위치 추가**
   - 현재 위치 자동 감지
   - 지도에서 위치 선택 기능
   - 위치 이름 편집 기능

2. **위치 표시**
   - 작은 지도 미리보기 제공
   - 위치 정보 삭제 옵션

### 3.7 저장 및 공유

1. **자동 저장**
   - 30초마다 자동 저장
   - 저장 상태 표시
   - 오프라인 모드에서 로컬 저장 후 동기화

2. **수동 저장**
   - 완료 버튼으로 저장 및 종료
   - 임시 저장 옵션

3. **공유 옵션**
   - 텍스트만 공유
   - 이미지와 함께 공유
   - 소셜 미디어 직접 공유
   - 링크 생성 공유 (앱 내에서만 볼 수 있는 제한적 링크)

## 4. 입력 필드 명세

| 필드명 | 필드 타입 | 필수 여부 | 최대 길이 | 입력 제한 | 기본값 |
|--------|----------|-----------|-----------|-----------|--------|
| 감정 선택 | 드롭다운 메뉴 | 필수 | - | 미리 정의된 감정 목록 | 없음 |
| 감정 강도 | 슬라이더 | 필수 | - | 1-10 범위 | 5 |
| 제목 | 텍스트 | 선택 | 100자 | 알파벳, 숫자, 특수문자 | 현재 날짜 |
| 본문 | 텍스트 영역 | 선택 | 제한 없음 | 모든 문자 | 빈 문자열 |
| 태그 | 텍스트 (여러 개) | 선택 | 태그당 30자 | 알파벳, 숫자, 특수문자 일부 | 빈 배열 |
| 위치 | 좌표 + 텍스트 | 선택 | 위치명 50자 | 좌표값, 텍스트 | 현재 위치 |
| 미디어 첨부 | 파일 | 선택 | 사진: 10MB/개<br>동영상: 100MB/개<br>음성: 10MB/개 | 이미지: jpg, png, gif<br>동영상: mp4, mov<br>음성: mp3, m4a | 없음 |

## 5. 상호작용 및 전환

1. **화면 전환**
   - 뒤로 가기: 일기 목록 페이지로 이동 (저장 프롬프트 표시)
   - 완료 버튼: 저장 후 일기 상세 보기 페이지로 이동
   - 저장 실패 시: 오류 메시지와 재시도 옵션 제공

2. **상호작용 흐름**
   - 일기 작성 시작 → 감정 선택 → 제목/본문 작성 → 미디어/태그 추가 → 저장
   - 언제든지 미디어 추가 및 태그 지정 가능
   - AI 지원 기능은 본문 작성 중 액세스 가능
   - 위치 정보는 선택적으로 언제든지 추가 가능

3. **제스처 지원**
   - 스와이프 다운: 키보드 닫기
   - 핀치 줌: 이미지 확대/축소
   - 길게 누르기: 텍스트 선택

## 6. 오류 처리

1. **네트워크 오류**
   - 오프라인 상태: 로컬 저장 후 "오프라인 모드에서 저장됨" 표시
   - 동기화 실패: 재시도 옵션과 함께 알림 표시

2. **저장 오류**
   - 데이터 손상: 마지막 자동 저장본 복구 제안
   - 저장 공간 부족: 사용자에게 알림 및 가이드 제공

3. **미디어 관련 오류**
   - 파일 크기 초과: 압축 제안 또는 크기 제한 안내
   - 지원되지 않는 형식: 지원 형식 안내

## 7. 접근성 요구사항

1. **화면 읽기 지원**
   - 모든 UI 요소에 적절한 접근성 레이블 제공
   - 감정 이모지에 텍스트 대체 설명 제공

2. **색상 대비**
   - WCAG 2.1 AA 표준 준수
   - 고대비 모드 지원

3. **대체 입력 방법**
   - 음성 입력 지원
   - 키보드 네비게이션 지원

## 8. 성능 요구사항

1. **응답 시간**
   - 화면 로딩: 2초 이내
   - 미디어 업로드: 5초 이내 (10MB 기준)
   - 자동 저장: 백그라운드에서 1초 이내

2. **오프라인 기능**
   - 모든 핵심 기능 오프라인에서 작동
   - 동기화 필요 시 명확한 표시

3. **배터리 사용량**
   - 5분간 지속적 사용 시 배터리 사용량 3% 이하

## 9. 기술 요구사항

1. **클라이언트 플랫폼**
   - iOS 14 이상
   - Android 8.0 이상
   - Web (모던 브라우저)

2. **서버 연동**
   - 사용자 데이터 암호화 저장
   - 로컬-클라우드 동기화
   - API 버전: v2.0 이상

3. **데이터 관리**
   - 로컬 캐싱 구현
   - 데이터 백업 지원
   - 자동 동기화 설정

## 10. 미래 확장성

1. **계획된 기능**
   - 일기 템플릿 기능
   - 협업 일기 작성
   - 고급 감정 분석 대시보드

2. **API 확장**
   - 외부 앱 연동
   - 웨어러블 기기 데이터 통합

## 11. 종속성 및 제약사항

1. **필수 서비스**
   - Firebase Authentication
   - Cloud Firestore
   - Cloud Storage
   - TensorFlow Lite (감정 분석)

2. **제약사항**
   - 일기 공유 시 개인정보 보호 고려
   - 감정 분석 데이터는 기기 내에서만 처리
   - 오프라인 저장 시 5MB 이하 데이터만 즉시 저장 